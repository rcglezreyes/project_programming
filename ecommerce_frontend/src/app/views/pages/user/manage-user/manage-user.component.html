<c-row>
  <c-col xs="12">
    <c-card class="mb-4">
      <c-card-header ngPreserveWhitespaces>
        <strong>{{ title }}</strong>
      </c-card-header>
      <c-card-body>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" cForm class="row g-3 needs-validation">
          <c-col md="6">
            <label cLabel for="first_name">First Name</label>
            <c-input-group class="mb-3">
              <input formControlName="first_name" autoComplete="given-name" cFormControl
                [ngClass]="{'is-invalid': registerForm.get('first_name')?.invalid && registerForm.get('first_name')?.touched}" />
            </c-input-group>
            <div *ngIf="registerForm.get('first_name')?.invalid && registerForm.get('first_name')?.touched"
              class="c-form-feedback">
              First Name is required
            </div>
          </c-col>
          <c-col md="6">
            <label cLabel for="last_name">Last name</label>
            <c-input-group class="mb-3">
              <input formControlName="last_name" autoComplete="family-name" cFormControl
                [ngClass]="{'is-invalid': registerForm.get('last_name')?.invalid && registerForm.get('last_name')?.touched}" />
            </c-input-group>
            <div *ngIf="registerForm.get('last_name')?.invalid && registerForm.get('last_name')?.touched"
              class="c-form-feedback">
              Last Name is required
            </div>
          </c-col>
          <c-col md="6">
            <label cLabel for="email">Email</label>
            <c-input-group class="mb-3">
              <input formControlName="email" autoComplete="email" cFormControl
                [ngClass]="{'is-invalid': registerForm.get('email')?.invalid && registerForm.get('email')?.touched}" />
            </c-input-group>
            <div *ngIf="registerForm.get('email')?.invalid && registerForm.get('email')?.touched"
              class="c-form-feedback">
              <div *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</div>
              <div *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format</div>
              <div *ngIf="registerForm.get('email')?.errors?.['existingEmailInUsers']">
                Email already exists in Users
              </div>
              <div *ngIf="registerForm.get('email')?.errors?.['existingEmailInCustomers']">
                Email already exists in Customers
              </div>
            </div>
          </c-col>
          <c-col md="6">
            <label cLabel for="phone">Phone</label>
            <c-input-group class="mb-3">
              <input formControlName="phone" autoComplete="tel" cFormControl
                [ngClass]="{'is-invalid': registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched}" />
            </c-input-group>
            <div *ngIf="registerForm.get('phone')?.invalid && registerForm.get('phone')?.touched"
              class="c-form-feedback">
              Phone is required
            </div>
          </c-col>
          <c-col md="12">
            <label cLabel for="address">Address</label>
            <c-input-group class="mb-3">
              <input formControlName="address" autoComplete="address-line1" cFormControl
                [ngClass]="{'is-invalid': registerForm.get('address')?.invalid && registerForm.get('address')?.touched}" />
            </c-input-group>
            <div *ngIf="registerForm.get('address')?.invalid && registerForm.get('address')?.touched"
              class="c-form-feedback">
              Address is required
            </div>
          </c-col>
          <c-col md="4">
            <label cLabel for="city">City</label>
            <c-input-group class="mb-3">
              <input formControlName="city" autoComplete="address-level2" cFormControl
                [ngClass]="{'is-invalid': registerForm.get('city')?.invalid && registerForm.get('city')?.touched}" />
            </c-input-group>
            <div *ngIf="registerForm.get('city')?.invalid && registerForm.get('city')?.touched" class="c-form-feedback">
              City is required
            </div>
          </c-col>
          <c-col md="4">
            <label cLabel for="postal_code">Zip code</label>
            <c-input-group class="mb-3">
              <input formControlName="postal_code" autoComplete="postal-code" cFormControl type="text"
                [ngClass]="{'is-invalid': registerForm.get('postal_code')?.invalid && registerForm.get('postal_code')?.touched}" />
            </c-input-group>
            <div *ngIf="registerForm.get('postal_code')?.invalid && registerForm.get('postal_code')?.touched"
              class="c-form-feedback">
              <div *ngIf="registerForm.get('postal_code')?.errors?.['required']">Zip Code is required</div>
              <div *ngIf="registerForm.get('postal_code')?.errors?.['pattern']">Zip Code must be a positive integer
              </div>
            </div>
          </c-col>
          <c-col md="4">
            <label cLabel for="country">Country</label>
            <c-input-group class="mb-3">
              <ng-select formControlName="country" [items]="listCountries" bindLabel="fields.name" bindValue="pk"
                placeholder="Select country"
                style="border-radius: 0.25rem; width:100%; padding: 0.375rem 0.75rem; border: 1px solid #ddd"
                [ngClass]="{'is-invalid': registerForm.get('country')?.invalid && registerForm.get('country')?.touched}">
                <ng-template ng-option-tmp let-country="item">
                  <img [src]="country.fields.flag" width="20" height="15" style="margin-right: 8px;">
                  {{ country.fields.name }}
                </ng-template>
              </ng-select>
            </c-input-group>
            <div *ngIf="registerForm.get('country')?.invalid && registerForm.get('country')?.touched"
              class="c-form-feedback">
              Country is required
            </div>
          </c-col>
          <c-col xs="12">
            <button cButton class="me-1" color="dark" type="submit">
              {{ buttonText }}
            </button>
            <button (click)="navigateToCustomers()" cButton color="secondary" type="reset">
              Cancel
            </button>
          </c-col>
        </form>
      </c-card-body>
    </c-card>
  </c-col>
</c-row>